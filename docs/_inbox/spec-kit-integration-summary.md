---
doc_id: DOC-2025-00037
title: Spec-Kit Integration with .agent/ System
doc_type: summary
status: active
canonical: false
created: 2025-10-21
tags: [spec-kit, agent-system, integration, architecture]
summary: >
  Documentation of how Spec-Kit (SDD methodology) integrates with the
  .agent/ multi-agent instruction system.
---

# Spec-Kit Integration with .agent/ System

**Date:** 2025-10-21
**Integration Type:** External Tool → Agent System
**Status:** ✅ Integrated

## Overview

The project now has **two systems working together**:

1. **`.agent/` System** - Multi-agent instruction framework (custom)
2. **Spec-Kit** - Specification-Driven Development toolkit (external)

## Architecture

### Before Integration

```
❌ Isolated Systems

.claude/commands/          .agent/
├── speckit.*.md          ├── base/
                          ├── adapters/claude.md
                          └── meta/

No connection between the two!
```

### After Integration

```
✅ Integrated Architecture

.agent/
├── base/                  # Canonical rules
│   ├── 10-principles.md
│   ├── 20-rules.md
│   └── ...
├── adapters/
│   └── claude.md          # References Spec-Kit integration
├── integrations/          # ← NEW
│   └── spec-kit.md        # ← Spec-Kit documentation & mapping
└── meta/

.claude/commands/          # External (managed by Spec-Kit)
└── speckit.*.md

.specify/                  # External (managed by Spec-Kit)
├── memory/constitution.md # ← Links to .agent/base/ rules
└── ...

specs/                     # Project-managed (follows .agent/ rules)
└── NNN-feature/
```

## Integration Points

### 1. Constitution Alignment

**Spec-Kit Constitution** (`.specify/memory/constitution.md`) should reference **`.agent/` rules**:

```markdown
# .specify/memory/constitution.md

## Article I: Code Quality

This extends .agent/base/ rules:
- R-CODE-001: No hardcoded secrets
- R-CODE-002: Meaningful names
- R-CODE-003: Comment non-obvious code

## Article II: Testing

Follows .agent/ testing standards:
- R-TST-001: Test critical paths
- R-TST-002: Builds must pass
```

**Benefit:** Single source of truth for project standards.

### 2. Adapter References Spec-Kit

**`.agent/adapters/claude.md`** now includes:

```markdown
## Spec-Kit Integration

This project uses GitHub Spec-Kit for SDD.

Available Commands:
- /speckit.constitution
- /speckit.specify
- /speckit.plan
- /speckit.tasks
- /speckit.implement

Full Documentation: .agent/integrations/spec-kit.md

Important: Spec-Kit commands must follow .agent/base/ rules.
```

**Benefit:** Claude Code knows about Spec-Kit and rule compliance.

### 3. Integration Documentation

**`.agent/integrations/spec-kit.md`** provides:

- Command reference
- Workflow documentation
- Rule compliance mapping
- Best practices
- Examples

**Benefit:** Complete guide for using Spec-Kit within `.agent/` framework.

## File Hierarchy

### `.agent/` System (Project Authority)

```
.agent/
├── base/                  # CANONICAL RULES (source of truth)
│   ├── 10-principles.md
│   ├── 20-rules.md
│   ├── 30-glossary.md
│   └── 40-documentation.md
├── adapters/              # Agent-specific configs
│   └── claude.md          # References integrations/spec-kit.md
├── integrations/          # External tool documentation
│   └── spec-kit.md        # Spec-Kit usage within .agent/ rules
└── meta/                  # Versioning
```

**Ownership:** Project team
**Version Control:** Git
**Editing:** Manual (by team)

### Spec-Kit Files (External Tool)

```
.specify/                  # DO NOT EDIT - Managed by `specify` CLI
├── memory/
│   └── constitution.md    # YOU EDIT - Should reference .agent/base/
├── scripts/               # DO NOT EDIT
└── templates/             # DO NOT EDIT

.claude/commands/          # DO NOT EDIT - Managed by `specify` CLI
└── speckit.*.md

specs/                     # YOU MANAGE - Generated by /speckit commands
└── NNN-feature/
    ├── spec.md            # Generated, then reviewed by you
    ├── plan.md            # Generated, then reviewed by you
    └── tasks.md           # Generated, then reviewed by you
```

**Ownership:**
- `.specify/`, `.claude/commands/` → Spec-Kit tool
- `specs/` → Project team (generated then managed)
- `.specify/memory/constitution.md` → You edit (link to `.agent/`)

**Version Control:**
- `.specify/`, `.claude/commands/` → Ignored or tracked as external
- `specs/` → Tracked in Git

## Integration Workflow

### Step 1: Create Constitution (First Time)

```bash
/speckit.constitution

Prompt:
Create constitution that extends .agent/base/ rules.

Reference these principles:
- .agent/base/10-principles.md (P-1 through P-10)
- .agent/base/20-rules.md (R-CODE, R-TST, R-DOC, R-GIT, R-SEC)

For this dungeon crawler project:
- Data-driven entity design (YAML/JSON)
- Component-based architecture
- Test-driven development
- Terminal.Gui rendering
- .NET 8 conventions
```

**Output:** `.specify/memory/constitution.md` that references `.agent/` system.

### Step 2: Use Spec-Kit for Features

```bash
/speckit.specify
# Define feature requirements

/speckit.plan
# Create technical plan (follows .agent/ rules)

/speckit.tasks
# Generate tasks

/speckit.implement
# AI generates code (validated against .agent/ rules)
```

### Step 3: Review Against .agent/ Rules

After AI generates code:

```bash
# Check compliance
1. R-DOC-002: YAML front-matter? ✓
2. R-CODE-001: No secrets? ✓
3. R-TST-001: Tests included? ✓
4. R-GIT-001: Good commit message? ✓
```

## Rule Enforcement

### How .agent/ Rules Apply to Spec-Kit

| Spec-Kit Phase | .agent/ Rules Applied |
|----------------|----------------------|
| `/speckit.specify` | R-DOC (documentation standards) |
| `/speckit.plan` | R-CODE, R-SEC (architecture, security) |
| `/speckit.tasks` | R-TST (test requirements) |
| `/speckit.implement` | ALL rules (code generation) |

### Example: R-DOC-002 Compliance

**Rule:** All docs must have YAML front-matter

**Application:**
```markdown
# specs/042-inventory/spec.md

---
doc_id: SPEC-042
title: Inventory System
doc_type: spec
status: draft
canonical: true
created: 2025-10-21
tags: [inventory, gameplay]
summary: Player inventory management
---

# Inventory System Specification
...
```

**Enforcement:** AI must include front-matter when generating specs.

## Benefits of Integration

### 1. Single Source of Truth

```
.agent/base/20-rules.md
    ↓ referenced by
.specify/memory/constitution.md
    ↓ guides
Spec-Kit AI generation
    ↓ produces
Code that follows .agent/ rules
```

### 2. Consistent Quality

All AI-generated code (from Spec-Kit) follows project standards automatically.

### 3. Documentation Alignment

- Spec files follow doc standards (R-DOC)
- Generated code follows code standards (R-CODE)
- Tests follow test standards (R-TST)

### 4. Clear Ownership

| System | Owner | Purpose |
|--------|-------|---------|
| `.agent/base/` | Project team | Canonical rules |
| `.specify/memory/constitution.md` | Project team | Spec-Kit rules (extends .agent/) |
| `.specify/`, `.claude/` | Spec-Kit tool | Tool infrastructure |
| `specs/` | Project team | Generated specifications |

## Example: Complete Workflow

### Scenario: Add Inventory System

#### Step 1: Check .agent/ Principles

```bash
cat .agent/base/10-principles.md
# P-2: Data-driven design preferred
# P-3: Test-driven development
# P-6: Component composition over inheritance
```

#### Step 2: Create Specification

```bash
/speckit.specify

Prompt (follows P-2):
Create inventory system with:
- Item definitions in YAML (data-driven)
- Component-based inventory (not inheritance)
- Grid-based UI (20 slots)
```

AI generates: `specs/042-inventory/spec.md`

Includes YAML front-matter (R-DOC-002) ✓

#### Step 3: Create Plan

```bash
/speckit.plan

Prompt (follows R-CODE, R-TST):
- YAML item schemas
- Component-based inventory
- Terminal.Gui grid dialog
- Include unit tests
```

AI generates:
- `specs/042-inventory/plan.md`
- `specs/042-inventory/data-model.md`

References .agent/ principles ✓

#### Step 4: Implementation

```bash
/speckit.tasks
/speckit.implement
```

AI generates code that:
- Has no secrets (R-CODE-001) ✓
- Includes tests (R-TST-001) ✓
- Is well-documented (R-DOC-001) ✓

#### Step 5: Review

Check generated code against `.agent/base/20-rules.md`:
- ✓ All rules followed
- ✓ Constitution alignment
- ✓ Quality standards met

## Migration Notes

### What Changed

**Before:**
- Spec-Kit isolated from project standards
- No connection to `.agent/` system
- Constitution separate from project rules

**After:**
- Spec-Kit integrated with `.agent/` framework
- Constitution references `.agent/base/` rules
- Single unified standards system

### Compatibility

- ✅ Backward compatible with existing `.agent/` rules
- ✅ Spec-Kit works as before (just better integrated)
- ✅ No breaking changes to either system

## Troubleshooting

### Issue: Spec-Kit generates code that violates .agent/ rules

**Solution:**
1. Check constitution (`.specify/memory/constitution.md`)
2. Ensure it references `.agent/base/` rules
3. Re-run `/speckit.plan` with explicit rule references

### Issue: Constitution out of sync with .agent/

**Solution:**
1. Update `.specify/memory/constitution.md`
2. Add references to `.agent/base/20-rules.md`
3. Re-generate plans with updated constitution

### Issue: Don't know which system to use

**Guideline:**
- **New features:** Use `/speckit.specify` → `/speckit.plan` → `/speckit.implement`
- **Code standards:** Refer to `.agent/base/20-rules.md`
- **Agent config:** Update `.agent/adapters/claude.md`
- **Integration docs:** See `.agent/integrations/spec-kit.md`

## References

### Agent System
- `.agent/README.md` - System overview
- `.agent/base/10-principles.md` - Core principles
- `.agent/base/20-rules.md` - Normative rules
- `.agent/adapters/claude.md` - Claude Code config

### Spec-Kit
- `.agent/integrations/spec-kit.md` - Integration guide
- `.specify/memory/constitution.md` - Project constitution
- `docs/_inbox/spec-kit-migration-complete.md` - Migration summary

### External
- https://github.com/github/spec-kit - Official Spec-Kit repo
- `ref-projects/spec-kit/spec-driven.md` - SDD methodology

## Summary

**Integration Status:** ✅ Complete

**What Was Done:**
1. Created `.agent/integrations/spec-kit.md` (integration guide)
2. Updated `.agent/adapters/claude.md` (references Spec-Kit)
3. Updated `.agent/README.md` (documents integrations/)
4. Documented constitution alignment strategy

**Result:**
- Spec-Kit works **within** `.agent/` framework
- Single source of truth for project standards
- Consistent quality across AI-generated code
- Clear ownership and integration points

**Next Step:**
Create constitution (`.specify/memory/constitution.md`) that references `.agent/base/` rules.

---

**Integration completed successfully on 2025-10-21**
